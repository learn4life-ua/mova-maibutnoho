<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–≤–µ—Å—Ç ¬´–ú–æ–≤–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤¬ª ‚Äî –ú–æ–≤–∞ –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ</title>
  <meta name="description" content="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –∫–≤–µ—Å—Ç –¥–ª—è –≤–∏–∫—Ä–∏—Ç—Ç—è –∫–∞–ª—å–æ–∫, —Ä—É—Å–∏–∑–º—ñ–≤ —ñ –ø–æ–º–∏–ª–æ–∫. –û–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç, –∫–æ—Ä–∏—Å—Ç—É–π—Å—è –ø—ñ–¥–∫–∞–∑–∫–∞–º–∏ —Ç–∞ –∑–¥–æ–±—É–≤–∞–π –±–µ–π–¥–∂—ñ." />
  <meta name="color-scheme" content="light" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    /* --- –ó–ú–Ü–ù–ù–Ü –¢–ê –ë–ê–ó–û–í–Ü –°–¢–ò–õ–Ü --- */
    :root {
      --blue: #4BA3C3; --blue-dark: #1E3A5F; --gray-bg: #F5F7FA;
      --text: #2C2C2C; --muted: #6B7280; --border: #D1D5DB;
      --ok:#16a34a; /* —É—Å–ø—ñ—Ö */
      --warn:#ef4444; /* –ø–æ–º–∏–ª–∫–∞ */
    }
    
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      font-family: 'Inter', sans-serif; background-color: var(--gray-bg);
      color: var(--text); line-height: 1.7; margin: 0;
      display: flex; flex-direction: column;
    }
    
    /* –°–¢–ò–õ–Ü –•–ï–î–ï–†–ê/–§–£–¢–ï–†–ê (–ó –ê–î–ê–ü–¢–ê–¶–Ü–Ñ–Æ –ü–Ü–î –î–ò–ó–ê–ô–ù –§–õ–ï–®-–ö–ê–†–¢–û–ö) */
    .page-header {
      background: linear-gradient(90deg, var(--blue-dark) 0%, var(--blue) 100%);
      color: #fff; padding: 1rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.10);
      position: sticky; top: 0; z-index: 50;
    }
    .header-nav {
      max-width: 900px; margin: 0 auto; display: flex;
      justify-content: space-between; align-items: center;
    }
    .back-link {
      display: inline-flex; align-items: center; gap: 0.5rem;
      color: #fff; text-decoration: none; font-weight: 600;
      font-size: 0.95rem; transition: opacity 0.2s ease;
    }
    .back-link:hover { opacity: 0.85; }
    .back-link svg { width: 20px; height: 20px; }
    .guidebook-title {
      font-size: 0.9rem; opacity: 0.9;
    }
    @media (max-width: 640px) {
      .guidebook-title { display: none; }
    }
    
    /* –°–¢–ò–õ–Ü –û–°–ù–û–í–ù–û–ì–û –ö–û–ù–¢–ï–ù–¢–£ */
    .main-content {
      flex-grow: 1; max-width: 900px; width: 100%;
      margin: 1.5rem auto; padding: 0 1rem;
    }
    .content-wrapper {
      background: #fff; border-radius: 1rem; padding: 2rem 2.5rem;
      border: 1px solid var(--border); box-shadow: 0 6px 14px rgba(0, 0, 0, 0.05);
    }
    @media (max-width: 640px) {
      .content-wrapper { padding: 1.5rem; }
    }
    .content-wrapper h1 { /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */
      font-size: clamp(1.6rem, 2.5vw + 1rem, 2.25rem); font-weight: 700;
      color: var(--blue-dark); margin-top: 0; margin-bottom: 1rem; line-height: 1.3;
      text-align: center; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –≤–∏–≥–ª—è–¥—É */
    }
    .content-wrapper p {
      margin-top: 0; margin-bottom: 1.5rem; font-size: 1.05rem;
      color: var(--text);
    }
    .content-wrapper strong { font-weight: 600; color: var(--text); }
    footer { 
      text-align: center; padding: 1.5rem 1rem; font-size: 0.9rem;
      color: var(--muted); background: #fff; border-top: 1px solid var(--border);
      margin-top: auto; 
    }
    
    /* --- –°–¢–ò–õ–Ü –ö–û–ú–ü–û–ù–ï–ù–¢–Ü–í –ö–í–ï–°–¢–£ --- */
    .chip{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .7rem;border-radius:999px;border:1px solid var(--border);background:#fff; font-size: 0.85rem;}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.7rem 1rem;border-radius:.9rem;border:1px solid var(--border);transition:.15s; font-weight: 600;}
    .btn:hover{transform:translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1);}
    .btn-primary{background:var(--blue);color:#fff;border-color:var(--blue)}
    .btn-primary:disabled{opacity:.6}
    .btn-ghost{background:#fff}
    
    .opt{border:1px solid var(--border);border-radius:.9rem;padding:1rem;background:#fff;cursor:pointer;display:flex;gap:.8rem;align-items:flex-start; transition: all 0.2s;}
    .opt:hover{border-color:var(--blue); transform: translateY(-1px);}
    
    /* –°–¢–ê–¢–£–°–ò –í–Ü–î–ü–û–í–Ü–î–Ü */
    .opt.correct{border-color:var(--ok);box-shadow:0 0 0 3px rgba(22,163,74,.15); background-color: #f7fffb;}
    .opt.wrong{border-color:var(--warn);box-shadow:0 0 0 3px rgba(239,68,68,.12); background-color: #fffafa;}
    
    .kbd{display:none;} /* –ü–†–ò–•–û–í–ê–ù–û: —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –ª—ñ—Ç–µ—Ä–∏ */
    
    /* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ */
    dialog::backdrop{background:rgba(0,0,0,.45)}
    dialog{border:none;border-radius:1rem;max-width:680px;width:92%;padding:0;box-shadow:0 20px 40px rgba(0,0,0,.2)}
    .modal-body{padding:1.25rem}
    
    /* –ê–Ω—ñ–º–∞—Ü—ñ—è */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }
    .shake {
      animation: shake 0.5s ease-in-out;
    }

    /* –¢–æ—Å—Ç-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è */
    #toast {
      position: fixed; bottom: 2rem; left: 50%; 
      transform: translate(-50%, 150%); background: var(--blue-dark);
      color: white; padding: 0.8rem 1.5rem; border-radius: 999px;
      font-size: 0.9rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: transform 0.3s ease-in-out; z-index: 100; opacity: 0;
    }
    #toast.show {
      transform: translate(-50%, 0); opacity: 1;
    }
  </style>
</head>
<body class="flex flex-col min-h-screen">
  
  <!-- –•–ï–î–ï–† (–î–ò–ó–ê–ô–ù –§–õ–ï–®-–ö–ê–†–¢–û–ö) -->
  <header class="page-header">
    <nav class="header-nav">
      <!-- –ü–æ—Å–∏–ª–∞–Ω–Ω—è "–ù–∞ –≥–æ–ª–æ–≤–Ω—É" –∑ –≤–∞—à–∏–º URL -->
      <a href="https://learn4life-ua.github.io/mova-maibutnoho" class="back-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5"></path>
          <path d="M12 19l-7-7 7-7"></path>
        </svg>
        –ù–∞ –≥–æ–ª–æ–≤–Ω—É
      </a>
      <div class="guidebook-title">
        –ü–æ—Å—ñ–±–Ω–∏–∫: <strong>–ú–æ–≤–∞ –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ</strong>
      </div>
    </nav>
  </header>

  <!-- –û–°–ù–û–í–ù–ò–ô –ö–û–ù–¢–ï–ù–¢ -->
  <main class="main-content">
    <div class="content-wrapper">

      <!-- –ó–ê–ì–û–õ–û–í–û–ö –ö–í–ï–°–¢–£ -->
      <h1>–ö–≤–µ—Å—Ç ¬´–ú–æ–≤–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–∏–≤¬ª</h1>
      <p class="text-center max-w-lg mx-auto mb-6">–í–∏–∫—Ä–∏–≤–∞–π –∫–∞–ª—å–∫–∏, —Ä—É—Å–∏–∑–º–∏ —Ç–∞ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ. –í–∏–±–∏—Ä–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–∫–∏ ‚Äî —ñ –∑–±–∏—Ä–∞–π –±–µ–π–¥–∂—ñ.</p>

      <!-- –ü–ê–ù–ï–õ–¨ –ö–ï–†–£–í–ê–ù–ù–Ø –¢–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
      <section class="mb-6">
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
          <div class="flex flex-wrap items-center gap-3">
            <span class="chip" title="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å"><strong id="totalCount">‚Äî</strong> –∑–∞–≤–¥–∞–Ω—å</span>
            <span class="chip" title="–†—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ"><span id="levelLabel">–°–µ—Ä–µ–¥–Ω—ñ–π</span></span>
            <!-- –ß–Ü–ü –ü–†–û–ì–†–ï–°–£ –í–ò–î–ê–õ–ï–ù–û -->
          </div>
          <div class="flex flex-wrap items-center gap-2">
            <label class="flex items-center gap-2 text-sm text-[var(--text)]"><input id="shuffleToggle" type="checkbox" class="h-4 w-4"> –ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏</label>
            <label class="flex items-center gap-2 text-sm text-[var(--text)]"><input id="timedToggle" type="checkbox" class="h-4 w-4"> –¢–∞–π–º–µ—Ä 60—Å/–∑–∞–≤–¥.</label>
            <button id="restartBtn" class="btn bg-gray-100 hover:bg-gray-200" title="–ü–æ—á–∞—Ç–∏ –∑–∞–Ω–æ–≤–æ"><span class="mdi">‚ü≤</span> –ü–æ—á–∞—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
          </div>
        </div>
        <!-- –ü–†–û–ì–†–ï–° –ë–ê–† –í–ò–î–ê–õ–ï–ù–û -->
      </section>

      <!-- –û–ë–õ–ê–°–¢–¨ –ó–ê–í–î–ê–ù–ù–Ø -->
      <section id="taskArea" aria-live="polite">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm text-[var(--muted)]" id="taskCounter">–ó–∞–≤–¥–∞–Ω–Ω—è 1/‚Äî</div>
            <h2 class="text-xl md:text-2xl font-semibold mt-1">–í–∏–∫—Ä–∏–π –ø–æ–º–∏–ª–∫—É —Ç–∞ –æ–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç</h2>
          </div>
          <div class="text-right">
            <div id="timerBox" class="hidden text-base font-semibold text-red-500"><span id="timer">60</span> —Å</div>
          </div>
        </div>

        <div class="mt-4 p-4 bg-[#f9fafb] rounded-xl border border-[var(--border)]" id="promptBox">
          <p class="text-lg" id="promptText">‚Ä¶</p>
        </div>

        <div class="mt-4 grid gap-3" id="optionsBox" role="group" aria-label="–í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ"></div>

        <div class="mt-4 flex flex-wrap items-center gap-2">
          <!-- –ö–ù–û–ü–ö–ê –ü–Ü–î–ö–ê–ó–ö–ò –í–ò–î–ê–õ–ï–ù–ê -->
          <button id="checkBtn" class="btn btn-primary" title="–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (Enter)"><span class="mdi">‚úî</span> –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <button id="nextBtn" class="btn bg-gray-100 hover:bg-gray-200" title="–ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è (N)" disabled><span class="mdi">‚Üí</span> –î–∞–ª—ñ</button>
          <button id="skipBtn" class="btn bg-gray-100 hover:bg-gray-200" title="–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (S)">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏</button>
        </div>

        <!-- –ë–õ–û–ö –ü–Ü–î–ö–ê–ó–ö–ò –í–ò–î–ê–õ–ï–ù–û -->
        <div id="explainBox" class="mt-3 hidden text-sm bg-green-50 border border-green-200 text-green-900 rounded-lg p-3"></div>
      </section>

      <!-- –ü—ñ–¥–≤–∞–ª —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∫–≤–µ—Å—Ç—É -->
      <section class="text-sm text-[var(--muted)] mt-4 flex items-center justify-between border-t border-[var(--border)] pt-4">
        <!-- –ö–õ–ê–í–Ü–®–Ü –®–í–ò–î–ö–û–ì–û –î–û–°–¢–£–ü–£ –û–ù–û–í–õ–ï–ù–û -->
        <div>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <span class="kbd">Enter</span> ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, <span class="kbd">N</span> ‚Äî –¥–∞–ª—ñ, <span class="kbd">S</span> ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏.</div>
        <!-- –ö–ù–û–ü–ö–ê –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø –ü–†–û–ì–†–ï–°–£ –í–ò–î–ê–õ–ï–ù–ê -->
      </section>

    </div>
  </main>

  <!-- –§–£–¢–ï–† (–î–ò–ó–ê–ô–ù –§–õ–ï–®-–ö–ê–†–¢–û–ö) -->
  <footer>
    ¬© 2025 –í–°–ü ¬´–ê–≥—Ä–∞—Ä–Ω–æ-–µ–∫–æ–Ω–æ–º—ñ—á–Ω–∏–π —Ñ–∞—Ö–æ–≤–∏–π –∫–æ–ª–µ–¥–∂ –ü–î–ê–£¬ª. –ü—Ä–æ—î–∫—Ç ¬´–ú–æ–≤–∞ –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ¬ª.
  </footer>

  <!-- –ú–æ–¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
  <dialog id="resultModal">
    <div class="bg-[var(--blue-dark)] text-white rounded-t-[1rem] p-5">
      <h3 class="text-xl font-semibold">–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–µ—Å—Ç—É</h3>
      <p class="opacity-90 text-sm">–ü—ñ–¥—Å—É–º–æ–∫ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞—Ä–æ–±–ª–µ–Ω—ñ –±–µ–π–¥–∂—ñ</p>
    </div>
    <div class="modal-body">
      <div class="grid gap-3">
        <div class="flex flex-wrap items-center gap-3">
          <span class="chip"><strong>–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö:</strong> <span id="resRight">0</span></span>
          <span class="chip"><strong>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö:</strong> <span id="resWrong">0</span></span>
          <span class="chip"><strong>–ß–∞—Å:</strong> <span id="resTime">‚Äî</span></span>
        </div>
        <div class="mt-2 grid md:grid-cols-2 gap-3" id="badgeBox"></div>
        <div class="mt-2 text-sm text-[var(--muted)]" id="resTip"></div>
      </div>
      <div class="flex items-center justify-end gap-2 mt-4 p-3 border-t">
        <button class="btn bg-gray-100 hover:bg-gray-200" id="closeModalBtn">–ì–∞—Ä–∞–∑–¥</button>
        <button class="btn btn-primary" id="restartModalBtn">–ü—Ä–æ–π—Ç–∏ —â–µ —Ä–∞–∑</button>
      </div>
    </div>
  </dialog>

  <!-- –ï–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å–ø–ª–∏–≤–∞—é—á–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å -->
  <div id="toast" role="status" aria-live="polite"></div>

  <!-- –°–∫—Ä–∏–ø—Ç –∫–≤–µ—Å—Ç—É -->
  <script>
    /**
     * –î–ê–ù–Ü –ö–í–ï–°–¢–£
     * –î–æ–¥–∞–≤–∞–π/—Ä–µ–¥–∞–≥—É–π –∑–∞–≤–¥–∞–Ω–Ω—è —Ç—É—Ç. –§–æ—Ä–º–∞—Ç:
     * { prompt: '–†–µ—á–µ–Ω–Ω—è –∑ –ø–æ–º–∏–ª–∫–æ—é/–∫–∞–ª—å–∫–æ—é', options: ['–≤–∞—Ä—ñ–∞–Ω—Ç 1', '–≤–∞—Ä—ñ–∞–Ω—Ç 2', ...], correct: 0, hint: '–ø—ñ–¥–∫–∞–∑–∫–∞', explain: '–ø–æ—è—Å–Ω–µ–Ω–Ω—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ' }
     */
    const TASKS_BASE = [
      {
        prompt: '–ü–æ—Ç—Ä—ñ–±–Ω–æ *—Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥* –∑–∞ –ø—ñ–¥—Å—É–º–∫–∞–º–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è.',
        options: ['–∑—Ä–æ–±–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫', '–∑—Ä–æ–±–∏—Ç–∏ –≤–∏–≤–æ–¥', '–≤—á–∏–Ω–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫'],
        correct: 0,
        hint: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é ‚Äî ¬´–∑—Ä–æ–±–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫¬ª.',
        explain: '–ö–∞–ª—å–∫–∞ –∑ —Ä–æ—Å. ¬´—Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥¬ª. –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ: ¬´–∑—Ä–æ–±–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫¬ª.'
      },
      {
        prompt: '–ó–∞–≤—Ç—Ä–∞ *–ø–æ –ø–ª–∞–Ω—É* –º–∞—î–º–æ –∑—É—Å—Ç—Ä—ñ—á.',
        options: ['–∑–∞ –ø–ª–∞–Ω–æ–º', '–ø–æ –ø–ª–∞–Ω—É', '–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –ø–ª–∞–Ω—É'],
        correct: 0,
        hint: '–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–∏–π–º–µ–Ω–Ω–∏–∫–æ–º ¬´–∑–∞¬ª.',
        explain: '–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ¬´–∑–∞ –ø–ª–∞–Ω–æ–º¬ª, –º–æ–∂–ª–∏–≤–µ —Ç–∞–∫–æ–∂ ¬´–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –ø–ª–∞–Ω—É¬ª.'
      },
      {
        prompt: '–î—è–∫—É—é, —â–æ *–≤–∏–±–∞—á–∞—î—Ç–µ—Å—å* –∑–∞ –∑–∞—Ç—Ä–∏–º–∫—É.',
        options: ['–ø—Ä–æ—à—É –≤–∏–±–∞—á–µ–Ω–Ω—è', '–≤–∏–±–∞—á–∞—é—Å—å', '–≤–∏–±–∞—á–∞—î—Ç–µ—Å—å'],
        correct: 0,
        hint: '–£–Ω–∏–∫–∞—î–º–æ –∑–≤–æ—Ä–æ—Ç—É –Ω–∞ -—Å—è –≤ –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ–π —Ñ–æ—Ä–º—É–ª—ñ.',
        explain: '–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞: ¬´–ü—Ä–æ—à—É –≤–∏–±–∞—á–µ–Ω–Ω—è¬ª / ¬´–ü–µ—Ä–µ–ø—Ä–æ—à—É—é¬ª.'
      },
      {
        prompt: '–ü–æ—Å—Ç—Ä–∞–∂–¥–∞–ª–∏ *—ñ–∑-–∑–∞* –Ω–µ–≥–æ–¥–∏.',
        options: ['—á–µ—Ä–µ–∑ –Ω–µ–≥–æ–¥—É', '—ñ–∑-–∑–∞ –Ω–µ–≥–æ–¥–∏', '–ø–æ –ø—Ä–∏—á–∏–Ω—ñ –Ω–µ–≥–æ–¥–∏'],
        correct: 0,
        hint: '–ó–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—á–∏–Ω–∏ –ø–µ—Ä–µ–¥–∞—î ¬´—á–µ—Ä–µ–∑¬ª.',
        explain: '–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ: ¬´—á–µ—Ä–µ–∑ –Ω–µ–≥–æ–¥—É¬ª.'
      },
      {
        prompt: '–ó–≥—ñ–¥–Ω–æ *–Ω–∞–∫–∞–∑—É* –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É.',
        options: ['–∑–≥—ñ–¥–Ω–æ –∑ –Ω–∞–∫–∞–∑–æ–º', '–∑–≥—ñ–¥–Ω–æ –Ω–∞–∫–∞–∑—É', '–∑–≥—ñ–¥–Ω–æ –¥–æ –Ω–∞–∫–∞–∑—É'],
        correct: 0,
        hint: '–ü–æ—Ç—Ä—ñ–±–µ–Ω –ø—Ä–∏–π–º–µ–Ω–Ω–∏–∫ ¬´–∑¬ª.',
        explain: '–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ¬´–∑–≥—ñ–¥–Ω–æ –∑ –Ω–∞–∫–∞–∑–æ–º¬ª.'
      },
      {
        prompt: '–ü—Ä–æ—à—É –≤–∏—Å–ª–∞—Ç–∏ *–æ–±—Ä–∞—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫* –¥–æ –∫—ñ–Ω—Ü—è –¥–Ω—è.',
        options: ['–∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫', '–∑–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫', '–æ–±—Ä–∞—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫'],
        correct: 0,
        hint: '–ü—Ä–∏–∫–º–µ—Ç–Ω–∏–∫ ¬´–∑–≤–æ—Ä–æ—Ç–Ω–∏–π¬ª: –Ω–∞ -–Ω-–∏–π.',
        explain: '–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ: ¬´–∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫¬ª.'
      },
      {
        prompt: '–¶–µ *—Å–∞–º–µ –≥–æ–ª–æ–≤–Ω–µ* –ø–∏—Ç–∞–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É –¥–µ–Ω–Ω–æ–≥–æ.',
        options: ['–Ω–∞–π–≥–æ–ª–æ–≤–Ω—ñ—à–µ –ø–∏—Ç–∞–Ω–Ω—è', '—Å–∞–º–µ –≥–æ–ª–æ–≤–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è', '—Å–∞–º–∏–π –≥–æ–ª–æ–≤–Ω–∏–π –ø—É–Ω–∫—Ç'],
        correct: 0,
        hint: '–£–Ω–∏–∫–∞–π –∫–∞–ª—å–∫–∏ ¬´—Å–∞–º–µ –≥–æ–ª–æ–≤–Ω–µ¬ª.',
        explain: '–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ: ¬´–Ω–∞–π–≥–æ–ª–æ–≤–Ω—ñ—à–µ –ø–∏—Ç–∞–Ω–Ω—è¬ª.'
      },
      {
        prompt: '–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —î —É *–ø—Ä–∏–ª–∞–∂–µ–Ω–æ–º—É —Ñ–∞–π–ª—ñ*.',
        options: ['–¥–æ–ª—É—á–µ–Ω–æ–º—É —Ñ–∞–π–ª—ñ', '–ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–æ–º—É —Ñ–∞–π–ª—ñ', '–ø—Ä–∏–ª–∞–∂–µ–Ω–æ–º—É —Ñ–∞–π–ª—ñ'],
        correct: 1, // –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –º–æ–∂–µ –±—É—Ç–∏ —ñ "–¥–æ–ª—É—á–µ–Ω–æ–º—É"
        hint: '–£ –¥—ñ–ª–æ–≤–æ–º—É —Å—Ç–∏–ª—ñ ‚Äî ¬´–ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–∏–π/–¥–æ–ª—É—á–µ–Ω–∏–π —Ñ–∞–π–ª¬ª.',
        explain: '¬´–ü—Ä–∏–ª–∞–∂–µ–Ω–∏–π¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ—Ä—ñ—á—á—è/–∫–∞–ª—å–∫–∞. –ö–æ—Ä–µ–∫—Ç–Ω–æ: ¬´–ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–∏–π¬ª –∞–±–æ ¬´–¥–æ–ª—É—á–µ–Ω–∏–π¬ª.'
      },
      {
        prompt: '–¶–µ –ø–∏—Ç–∞–Ω–Ω—è –º–∏ *–æ–±–≥–æ–≤–æ—Ä–∏–º–æ –Ω–∞ —Å–ª—ñ–¥—É—é—á–æ–º—É —Ç–∏–∂–Ω—ñ*.',
        options: ['–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∏–∂–Ω—è', '—Å–ª—ñ–¥—É—é—á–æ–≥–æ —Ç–∏–∂–Ω—è', '–≤ —Å–ª—ñ–¥—É—é—á–∏–π —Ç–∏–∂–¥–µ–Ω—å'],
        correct: 0,
        hint: '–õ–µ–∫—Å–∏—á–Ω–∞ –Ω–æ—Ä–º–∞: ¬´–Ω–∞—Å—Ç—É–ø–Ω–∏–π¬ª, –Ω–µ ¬´—Å–ª—ñ–¥—É—é—á–∏–π¬ª.',
        explain: '–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ¬´–Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∏–∂–Ω—è¬ª.'
      },
      {
        prompt: '–ü—Ä–æ—à—É *–≤—ñ–¥–æ—Å–ª–∞—Ç–∏* –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è.',
        options: ['–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç', '–≤—ñ–¥–æ—Å–ª–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç', '—Å–∫–∏–Ω—É—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç —è–∫–æ—Å—å'],
        correct: 0,
        hint: '–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –ª–µ–∫—Å–∏–∫–∞ –∑–∞–º—ñ—Å—Ç—å –∂–∞—Ä–≥–æ–Ω—ñ–∑–º—ñ–≤.',
        explain: '–ö–æ—Ä–µ–∫—Ç–Ω–æ: ¬´–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç¬ª.'
      }
    ];

    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è/—Å—Ç–∞–Ω
    let tasks = JSON.parse(JSON.stringify(TASKS_BASE));
    let idx = 0;
    let right = 0; let wrong = 0; let startedAt = null; let perTaskTimer = null; let leftSec = 60;
    
    // –ï–ª–µ–º–µ–Ω—Ç–∏
    const totalCountEl = document.getElementById('totalCount');
    const taskCounterEl = document.getElementById('taskCounter');
    const promptTextEl = document.getElementById('promptText');
    const optionsBoxEl = document.getElementById('optionsBox');
    const checkBtn = document.getElementById('checkBtn');
    const nextBtn = document.getElementById('nextBtn');
    const skipBtn = document.getElementById('skipBtn');
    const explainBox = document.getElementById('explainBox');
    const shuffleToggle = document.getElementById('shuffleToggle');
    const timedToggle = document.getElementById('timedToggle');
    const timerEl = document.getElementById('timer');
    const timerBox = document.getElementById('timerBox');
    const restartBtn = document.getElementById('restartBtn');

    const resultModal = document.getElementById('resultModal');
    const resRight = document.getElementById('resRight');
    const resWrong = document.getElementById('resWrong');
    const resTime = document.getElementById('resTime');
    const badgeBox = document.getElementById('badgeBox');
    const resTip = document.getElementById('resTip');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const restartModalBtn = document.getElementById('restartModalBtn');
    
    const toastEl = document.getElementById('toast');
    let toastTimer = null;

    // –£—Ç—ñ–ª—ñ—Ç–∏
    const shuffle = (arr)=>{
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }
    const fmtTime = (ms)=>{
      const sec = Math.round(ms/1000); const m=Math.floor(sec/60); const s=sec%60; return `${m}:${s.toString().padStart(2,'0')}`;
    }

    function showToast(message) {
        toastEl.textContent = message;
        toastEl.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => {
            toastEl.classList.remove('show');
        }, 2500); // –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–Ω–∏–∫–Ω–µ —á–µ—Ä–µ–∑ 2.5 —Å–µ–∫—É–Ω–¥–∏
    }


    function resetAll(forceShuffle = false){
        tasks = JSON.parse(JSON.stringify(TASKS_BASE));
        if (shuffleToggle.checked || forceShuffle) {
            shuffle(tasks);
        }
        idx = 0; right = 0; wrong = 0; startedAt = new Date();
        clearInterval(perTaskTimer); leftSec = 60; timerEl.textContent = leftSec;
        timerBox.classList.toggle('hidden', !timedToggle.checked);
        render();
    }


    function startPerTaskTimer(){
      clearInterval(perTaskTimer);
      if(!timedToggle.checked) return;
      leftSec = 60; timerEl.textContent = leftSec;
      perTaskTimer = setInterval(()=>{
        leftSec--; timerEl.textContent = leftSec;
        if(leftSec<=10){ // –ü—ñ–¥—Å–≤—ñ—á—É—î–º–æ —á–µ—Ä–≤–æ–Ω–∏–º, –∫–æ–ª–∏ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è 10 —Å–µ–∫—É–Ω–¥
             timerBox.classList.add('text-red-500');
        } else {
             timerBox.classList.remove('text-red-500');
        }
        
        if(leftSec<=0){
          clearInterval(perTaskTimer);
          lockOptions();
          revealAnswer(false, true); // –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —á–µ—Ä–µ–∑ —á–∞—Å
        }
      },1000);
    }

    function lockOptions(){
      optionsBoxEl.querySelectorAll('button.opt').forEach(b=>b.disabled=true);
      checkBtn.disabled = true;
      skipBtn.disabled = true; // –ë–ª–æ–∫—É—î–º–æ —ñ –ø—Ä–æ–ø—É—Å–∫
    }
    function unlockOptions(){
      optionsBoxEl.querySelectorAll('button.opt').forEach(b=>b.disabled=false);
      checkBtn.disabled = false;
      skipBtn.disabled = false; // –†–æ–∑–±–ª–æ–∫—É—î–º–æ
    }

    function render(){
      totalCountEl.textContent = tasks.length;
      taskCounterEl.textContent = `–ó–∞–≤–¥–∞–Ω–Ω—è ${Math.min(idx+1,tasks.length)}/${tasks.length}`;

      explainBox.classList.add('hidden'); explainBox.textContent='';
      nextBtn.disabled = true;

      if(idx>=tasks.length){
        showResults();
        return;
      }

      const t = tasks[idx];
      // (–û–ù–û–í–õ–ï–ù–û) –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
      promptTextEl.innerHTML = t.prompt.replace(/\*(.*?)\*/g,'<strong class="text-[var(--blue-dark)] font-extrabold">$1</strong>'); 
      optionsBoxEl.innerHTML = '';
      
      // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
      let optionIndices = Array.from(t.options.keys());
      if(shuffleToggle.checked) {
          shuffle(optionIndices);
      }
      
      optionIndices.forEach((originalIndex, i)=>{
        const opt = t.options[originalIndex];
        const btn = document.createElement('button');
        btn.className = 'opt text-left';
        btn.type='button';
        btn.setAttribute('data-i', originalIndex); // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        // –ö–õ–ê–í–Ü–®–Ü (A, B, C...) –í–ò–î–ê–õ–ï–ù–û
        btn.innerHTML = `<span>${opt}</span>`;
        btn.setAttribute('aria-label', `–í–∞—Ä—ñ–∞–Ω—Ç ${String.fromCharCode(65+i)}: ${opt}`);
        btn.addEventListener('click', ()=>selectOption(originalIndex)); // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å
        optionsBoxEl.appendChild(btn);
      });
      unlockOptions(); // –†–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
      startPerTaskTimer(); // –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
    }

    let chosen = null;
    function selectOption(i){
      chosen = i;
      optionsBoxEl.querySelectorAll('.opt').forEach(b=>b.classList.remove('ring-2','ring-[var(--blue)]'));
      // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ data-i –¥–ª—è –ø–æ—à—É–∫—É, –æ—Å–∫—ñ–ª—å–∫–∏ DOM-–ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–µ –±—É—Ç–∏ —ñ–Ω—à–∏–º
      const current = optionsBoxEl.querySelector(`.opt[data-i="${i}"]`);
      current.classList.add('ring-2','ring-[var(--blue)]');
    }

    function revealAnswer(isManualCheck=true, dueToTimer=false){
        const t = tasks[idx];
        const correct = t.correct;

        let isCorrectAnswer = (chosen === correct) && !dueToTimer;

        optionsBoxEl.querySelectorAll('.opt').forEach((b) => {
            const i = Number(b.getAttribute('data-i'));
            b.classList.remove('ring-2', 'ring-[var(--blue)]'); 

            if (i === correct) {
                b.classList.add('correct'); 
            }
            // –í–∏–ø–∞–¥–æ–∫: –æ–±—Ä–∞–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç
            if (chosen !== null && i === chosen && !isCorrectAnswer) {
                b.classList.add('wrong');
            }
        });

        if (isCorrectAnswer) {
            right++;
            explainBox.className = 'mt-3 text-sm bg-green-50 border border-green-200 text-green-900 rounded-lg p-3'; // –ó–µ–ª–µ–Ω–∏–π
            explainBox.textContent = t.explain;
        } else {
            wrong++;
            explainBox.className = 'mt-3 text-sm bg-red-50 border border-red-200 text-red-900 rounded-lg p-3'; // –ß–µ—Ä–≤–æ–Ω–∏–π
            explainBox.textContent = t.explain + (dueToTimer ? ' (–ß–∞—Å –≤–∏—á–µ—Ä–ø–∞–Ω–æ.)' : '');
        }

        explainBox.classList.remove('hidden');

        nextBtn.disabled = false;
        lockOptions(); 
    }


    // –û–±—Ä–æ–±–Ω–∏–∫–∏
    checkBtn.addEventListener('click', ()=>{
      if (chosen === null) {
        optionsBoxEl.classList.add('shake');
        setTimeout(() => optionsBoxEl.classList.remove('shake'), 500);
        showToast('–û–±–µ—Ä—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!');
        return; 
      }
      clearInterval(perTaskTimer); 
      revealAnswer(true, false);
    });


    nextBtn.addEventListener('click', ()=>{
      idx++; chosen=null; render();
    });

    skipBtn.addEventListener('click', ()=>{
        clearInterval(perTaskTimer); 
        idx++; chosen=null; render();
    });


    restartBtn.addEventListener('click', ()=>{ resetAll(); });


    // –ö–ª–∞–≤—ñ—à—ñ —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
    window.addEventListener('keydown', (e)=>{
      if (resultModal.open) return;
      if(['INPUT','TEXTAREA','BUTTON'].includes(document.activeElement.tagName)) return;

      const k = e.key.toLowerCase();
      
      // –û–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ (A, B, C...)
      if(k >= 'a' && k <= 'j' && !checkBtn.disabled){ // –î–æ–∑–≤–æ–ª—è—î–º–æ –¥–æ 10 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ (A-J)
        const charCode = k.charCodeAt(0);
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –∫–Ω–æ–ø–∫—É –∑–∞ —ó—ó –ø–æ—Ä—è–¥–∫–æ–≤–∏–º –Ω–æ–º–µ—Ä–æ–º (0 –¥–ª—è A, 1 –¥–ª—è B —ñ —Ç.–¥. —É –ø–æ—Ç–æ—á–Ω–æ–º—É –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ)
        const targetOption = optionsBoxEl.children[charCode - 97]; 
        
        if(targetOption) {
            const originalIndex = Number(targetOption.getAttribute('data-i'));
            if(!targetOption.disabled) {
                selectOption(originalIndex);
                e.preventDefault();
            }
        }
      }

      // –û–±—Ä–æ–±–∫–∞ —ñ–≥—Ä–æ–≤–∏—Ö –∫–Ω–æ–ø–æ–∫
      if(e.key === 'Enter' && !checkBtn.disabled){ checkBtn.click(); e.preventDefault(); }
      if(k === 'n' && !nextBtn.disabled){ nextBtn.click(); e.preventDefault(); }
      if(k === 's' && !skipBtn.disabled){ skipBtn.click(); e.preventDefault(); }
    });


    function showResults(){
      const total = tasks.length; const ms = Date.now()-startedAt.valueOf();
      resRight.textContent = right; resWrong.textContent = wrong; resTime.textContent = fmtTime(ms);
      badgeBox.innerHTML = '';
      const rate = total > 0 ? right/total : 0; 
      const badges = [];
      if(rate===1) badges.push({name:'–ú–æ–≤–Ω–∏–π —ñ–Ω—Å–ø–µ–∫—Ç–æ—Ä', desc:'–ë–µ–∑–ø–æ–º–∏–ª–∫–æ–≤–µ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è!'});
      else if(rate>=0.8) badges.push({name:'–†–µ–¥–∞–∫—Ç–æ—Ä —Ç–æ—á–Ω–æ—Å—Ç—ñ', desc:'–ú–∞–π–∂–µ —ñ–¥–µ–∞–ª—å–Ω–æ, –¥—Ä—ñ–±–Ω—ñ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ.'});
      else if(rate>=0.6) badges.push({name:'–ì—Ä–∞–º–æ—Ç–Ω–∏–π —Å–ª—ñ–¥—á–∏–π', desc:'–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —â–µ —Ç—Ä–æ—Ö–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.'});
      else badges.push({name:'–ü–æ—á–∞—Ç–∫—ñ–≤–µ—Ü—å-–¥–µ—Ç–µ–∫—Ç–∏–≤', desc:'–ù—ñ—á–æ–≥–æ, –ø—Ä–æ–¥–æ–≤–∂—É–π —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è.'});

      badges.forEach(b=>{
        const el = document.createElement('div');
        el.className = 'card p-3 bg-gray-50'; 
        el.innerHTML = `<div class="font-semibold text-lg">üèÖ ${b.name}</div><div class="text-sm text-[var(--muted)]">${b.desc}</div>`;
        badgeBox.appendChild(el);
      });
      resTip.textContent = rate<0.8 ? '–ü–æ—Ä–∞–¥–∞: –ø—Ä–æ–π–¥–∏ —Ä–æ–∑–¥—ñ–ª–∏ ¬´–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏¬ª —Ç–∞ ¬´–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è¬ª —É —Å–ª–æ–≤–Ω–∏–∫–∞—Ö ‚Äî –ø—ñ–¥—Ç—è–≥–Ω–µ—à –Ω–æ—Ä–º–∏ —à–≤–∏–¥–∫–æ.' : '–ß—É–¥–æ–≤–æ! –°–ø—Ä–æ–±—É–π —Ä–µ–∂–∏–º –∑ —Ç–∞–π–º–µ—Ä–æ–º –∞–±–æ –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è–º.';
      resultModal.showModal();
    }

    closeModalBtn.addEventListener('click', ()=>{ resultModal.close(); });
    restartModalBtn.addEventListener('click', ()=>{ resultModal.close(); resetAll(); });

    // –°—Ç–∞—Ä—Ç
    (function init(){
        // –£ —Ü—å–æ–º—É —Ä–µ–∂–∏–º—ñ (–±–µ–∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è) –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—î–º–æ resetAll –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ.
        shuffleToggle.addEventListener('change', () => {
            resetAll(shuffleToggle.checked);
        });

        timedToggle.addEventListener('change', () => {
            timerBox.classList.toggle('hidden', !timedToggle.checked);
            if (timedToggle.checked && idx < tasks.length && checkBtn.disabled === false) {
                 startPerTaskTimer();
            } else {
                 clearInterval(perTaskTimer);
                 timerBox.classList.remove('text-red-500'); // –ü—Ä–∏–±–∏—Ä–∞—î–º–æ —á–µ—Ä–≤–æ–Ω–∏–π, —è–∫—â–æ –≤–∏–º–∫–Ω—É–ª–∏
            }
        });

        resetAll(shuffleToggle.checked); 
    })();
  </script>
</body>
</html>
